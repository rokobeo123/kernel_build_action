name: ğŸ”‹ Xiaomi 14 Pro - AngelBeats Style + SukiSU + SUSFS

on:
  workflow_dispatch:
    inputs:
      profile:
        description: 'Battery Profile'
        required: true
        default: 'balanced'
        type: choice
        options:
          - extreme_battery    # Pin tá»‘t nháº¥t
          - balanced          # CÃ¢n báº±ng (KHUYÃŠN DÃ™NG)
          - performance       # Hiá»‡u nÄƒng cao

jobs:
  build:
    name: Build Kernel
    runs-on: ubuntu-22.04
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4
      
      - name: ğŸ§¹ Free up disk space
        run: |
          echo "Cleaning up disk space..."
          sudo rm -rf /usr/share/dotnet /usr/local/lib/android /opt/ghc /opt/hostedtoolcache
          sudo apt-get clean
          df -h
      
      - name: ğŸ“¦ Install build dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y \
            bc bison build-essential ccache curl flex \
            g++-multilib gcc-multilib git gnupg gperf \
            imagemagick lib32readline-dev lib32z1-dev \
            liblz4-tool libncurses5-dev libsdl1.2-dev \
            libssl-dev libxml2 libxml2-utils lzop \
            pngcrush rsync schedtool squashfs-tools \
            xsltproc zip zlib1g-dev python3 python-is-python3 \
            wget cpio kmod
          
          echo "âœ… Dependencies installed!"
      
      - name: ğŸ“‚ Clone Xiaomi 14 Pro kernel source
        run: |
          echo "ğŸ“¥ Cloning Xiaomi 14 Pro kernel source..."
          git clone --depth=1 \
            https://github.com/MiCode/Xiaomi_Kernel_OpenSource \
            -b shennong-u-oss \
            kernel
          
          cd kernel
          echo "âœ… Kernel source cloned!"
          echo "Kernel version:"
          make kernelversion 2>/dev/null || cat Makefile | grep "^VERSION\|^PATCHLEVEL\|^SUBLEVEL" | head -3
      
      - name: ğŸ”§ Integrate SukiSU Ultra (with builtin SUSFS support)
        working-directory: kernel
        run: |
          echo "ğŸš€ Installing SukiSU Ultra with builtin SUSFS config..."
          
          # SukiSU builtin Ä‘Ã£ patch sáºµn, chá»‰ thiáº¿u source files
          curl -LSs "https://raw.githubusercontent.com/SukiSU-Ultra/SukiSU-Ultra/main/kernel/setup.sh" | bash -s builtin
          
          if [ -d "KernelSU" ]; then
            echo "âœ… SukiSU integrated with SUSFS configs!"
            echo "KernelSU structure:"
            ls -la KernelSU/kernel/ | head -15
          else
            echo "âŒ SukiSU integration failed!"
            exit 1
          fi
      
      - name: ğŸ“¥ Clone SUSFS and copy source files
        working-directory: kernel
        run: |
          echo "ğŸ“¥ Cloning SUSFS for source files..."
          
          # Clone SUSFS repository
          git clone --depth=1 https://gitlab.com/simonpunk/susfs4ksu.git -b gki-android14-6.1
          
          if [ ! -d "susfs4ksu" ]; then
            echo "âŒ SUSFS clone failed!"
            exit 1
          fi
          
          echo "âœ… SUSFS cloned!"
          
          # ===== COPY SUSFS SOURCE FILES =====
          echo ""
          echo "ğŸ“‹ Copying SUSFS source files to KernelSU/kernel/..."
          
          # TÃ¬m vÃ  copy táº¥t cáº£ files SUSFS cáº§n thiáº¿t
          # Method 1: Copy tá»« ksu_susfs directory (náº¿u cÃ³)
          if [ -d "susfs4ksu/ksu_susfs" ]; then
            echo "Found ksu_susfs directory, copying..."
            cp -v susfs4ksu/ksu_susfs/*.c KernelSU/kernel/ 2>/dev/null || true
            cp -v susfs4ksu/ksu_susfs/*.h KernelSU/kernel/ 2>/dev/null || true
          fi
          
          # Method 2: Copy tá»« kernel_patches/ksu_susfs (náº¿u cÃ³)
          if [ -d "susfs4ksu/kernel_patches/ksu_susfs" ]; then
            echo "Found kernel_patches/ksu_susfs directory, copying..."
            cp -v susfs4ksu/kernel_patches/ksu_susfs/*.c KernelSU/kernel/ 2>/dev/null || true
            cp -v susfs4ksu/kernel_patches/ksu_susfs/*.h KernelSU/kernel/ 2>/dev/null || true
          fi
          
          # Method 3: TÃ¬m táº¥t cáº£ files cÃ³ "susfs" trong tÃªn
          echo "Searching for all SUSFS source files..."
          find susfs4ksu -type f \( -name "*susfs*.c" -o -name "*susfs*.h" \) | while read file; do
            echo "Copying: $file"
            cp -v "$file" KernelSU/kernel/ 2>/dev/null || true
          done
          
          echo ""
          echo "âœ… SUSFS source files copied!"
          echo ""
          echo "=== Verifying files in KernelSU/kernel/ ==="
          ls -la KernelSU/kernel/ | grep -i susfs || echo "âš ï¸ No explicit susfs files (may be integrated in other files)"
          
          echo ""
          echo "=== Files containing 'susfs' ==="
          find KernelSU/kernel -type f -exec grep -l "susfs" {} \; 2>/dev/null | head -10 || echo "Checking source integration..."
      
      - name: âš¡ Create AngelBeats-style battery configs
        working-directory: kernel
        run: |
          echo "âš¡ Creating battery optimization configs..."
          
          mkdir -p arch/arm64/configs/vendor
          
          # ============================================
          # EXTREME BATTERY MODE
          # ============================================
          cat > arch/arm64/configs/vendor/angelbeats_extreme_battery.config << 'EOF'
# ============================================
# AngelBeats Extreme Battery Mode
# Xiaomi 14 Pro (Shennong)
# Maximum battery life
# ============================================

# ===== KernelSU + SUSFS =====
CONFIG_KSU=y
CONFIG_KSU_SUSFS=y
CONFIG_KSU_SUSFS_OPEN_REDIRECT=y
CONFIG_KSU_SUSFS_SUS_PATH=y
CONFIG_KSU_SUSFS_SUS_MOUNT=y
CONFIG_KSU_SUSFS_SUS_KSTAT=y
CONFIG_KSU_SUSFS_SUS_OVERLAYFS=y
CONFIG_KSU_SUSFS_TRY_UMOUNT=y
CONFIG_KSU_SUSFS_SPOOF_UNAME=y
CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT=y
CONFIG_KSU_SUSFS_ENABLE_LOG=y

# ===== KPM + Kprobes =====
CONFIG_KPM=y
CONFIG_KPROBES=y
CONFIG_HAVE_KPROBES=y
CONFIG_KPROBE_EVENTS=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y

# ===== CPU - Maximum Power Saving =====
CONFIG_CPU_FREQ_GOV_POWERSAVE=y
CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL=y
# CONFIG_CPU_FREQ_GOV_PERFORMANCE is not set
CONFIG_CPU_IDLE=y
CONFIG_CPU_IDLE_GOV_MENU=y

# ===== I/O Scheduler - Battery Optimized =====
CONFIG_IOSCHED_BFQ=y
CONFIG_BFQ_GROUP_IOSCHED=y
CONFIG_DEFAULT_BFQ=y
CONFIG_MQ_IOSCHED_DEADLINE=y

# ===== Power Management - Aggressive =====
CONFIG_PM=y
CONFIG_PM_SLEEP=y
CONFIG_SUSPEND=y
CONFIG_PM_AUTOSLEEP=y
CONFIG_PM_WAKELOCKS=y
CONFIG_PM_WAKELOCKS_LIMIT=100
CONFIG_PM_WAKELOCKS_GC=y

# ===== Reduce Wakeups =====
CONFIG_NO_HZ_FULL=y
CONFIG_NO_HZ_IDLE=y
CONFIG_HIGH_RES_TIMERS=y

# ===== Memory Management =====
CONFIG_ZRAM=y
CONFIG_ZRAM_WRITEBACK=y
CONFIG_ZSMALLOC=y
CONFIG_LZ4_COMPRESS=y
CONFIG_LZ4_DECOMPRESS=y

# ===== Disable Debug (reduce overhead) =====
# CONFIG_DEBUG_KERNEL is not set
# CONFIG_DEBUG_INFO is not set
# CONFIG_SLUB_DEBUG is not set
# CONFIG_PAGE_POISONING is not set

# ===== Thermal - Aggressive Throttling =====
CONFIG_THERMAL=y
CONFIG_THERMAL_GOV_STEP_WISE=y

# ===== Networking =====
CONFIG_WIREGUARD=y
EOF

          # ============================================
          # BALANCED MODE (RECOMMENDED)
          # ============================================
          cat > arch/arm64/configs/vendor/angelbeats_balanced.config << 'EOF'
# ============================================
# AngelBeats Balanced Mode
# Xiaomi 14 Pro (Shennong)
# Good battery + Good performance
# ============================================

# ===== KernelSU + SUSFS =====
CONFIG_KSU=y
CONFIG_KSU_SUSFS=y
CONFIG_KSU_SUSFS_OPEN_REDIRECT=y
CONFIG_KSU_SUSFS_SUS_PATH=y
CONFIG_KSU_SUSFS_SUS_MOUNT=y
CONFIG_KSU_SUSFS_SUS_KSTAT=y
CONFIG_KSU_SUSFS_SUS_OVERLAYFS=y
CONFIG_KSU_SUSFS_TRY_UMOUNT=y
CONFIG_KSU_SUSFS_SPOOF_UNAME=y
CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT=y
CONFIG_KSU_SUSFS_ENABLE_LOG=y

# ===== KPM + Kprobes =====
CONFIG_KPM=y
CONFIG_KPROBES=y
CONFIG_HAVE_KPROBES=y
CONFIG_KPROBE_EVENTS=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y

# ===== CPU - Balanced =====
CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL=y
CONFIG_CPU_FREQ_GOV_POWERSAVE=y
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
CONFIG_CPU_IDLE=y

# ===== I/O Scheduler =====
CONFIG_IOSCHED_BFQ=y
CONFIG_BFQ_GROUP_IOSCHED=y
CONFIG_DEFAULT_BFQ=y

# ===== Power Management - Balanced =====
CONFIG_PM=y
CONFIG_PM_SLEEP=y
CONFIG_PM_WAKELOCKS=y
CONFIG_PM_WAKELOCKS_LIMIT=200
CONFIG_NO_HZ_IDLE=y

# ===== Memory =====
CONFIG_ZRAM=y
CONFIG_ZSMALLOC=y
CONFIG_LZ4_COMPRESS=y

# ===== Disable Debug =====
# CONFIG_DEBUG_KERNEL is not set
# CONFIG_DEBUG_INFO is not set

# ===== Thermal - Moderate =====
CONFIG_THERMAL=y
CONFIG_THERMAL_GOV_STEP_WISE=y

# ===== Networking =====
CONFIG_WIREGUARD=y
EOF

          # ============================================
          # PERFORMANCE MODE
          # ============================================
          cat > arch/arm64/configs/vendor/angelbeats_performance.config << 'EOF'
# ============================================
# AngelBeats Performance Mode
# Xiaomi 14 Pro (Shennong)
# Maximum performance
# ============================================

# ===== KernelSU + SUSFS =====
CONFIG_KSU=y
CONFIG_KSU_SUSFS=y
CONFIG_KSU_SUSFS_OPEN_REDIRECT=y
CONFIG_KSU_SUSFS_SUS_PATH=y
CONFIG_KSU_SUSFS_SUS_MOUNT=y
CONFIG_KSU_SUSFS_SUS_KSTAT=y
CONFIG_KSU_SUSFS_SUS_OVERLAYFS=y
CONFIG_KSU_SUSFS_TRY_UMOUNT=y
CONFIG_KSU_SUSFS_SPOOF_UNAME=y
CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT=y

# ===== KPM + Kprobes =====
CONFIG_KPM=y
CONFIG_KPROBES=y
CONFIG_HAVE_KPROBES=y
CONFIG_KPROBE_EVENTS=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y

# ===== CPU - Performance Focused =====
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL=y

# ===== I/O =====
CONFIG_IOSCHED_BFQ=y
CONFIG_BFQ_GROUP_IOSCHED=y

# ===== Power Management - Less Aggressive =====
CONFIG_PM=y
CONFIG_PM_WAKELOCKS_LIMIT=500

# ===== Memory =====
CONFIG_ZRAM=y
CONFIG_LZ4_COMPRESS=y

# ===== Disable Debug =====
# CONFIG_DEBUG_KERNEL is not set

# ===== Thermal - Less Aggressive =====
CONFIG_THERMAL=y
CONFIG_THERMAL_GOV_USER_SPACE=y

# ===== Networking =====
CONFIG_WIREGUARD=y
EOF

          echo "âœ… Battery optimization configs created!"
          ls -la arch/arm64/configs/vendor/angelbeats_*.config
      
      - name: ğŸ”¨ Clone Proton Clang toolchain
        run: |
          echo "ğŸ“¥ Cloning Proton Clang (best for GKI 6.1 kernels)..."
          git clone --depth=1 https://github.com/kdrag0n/proton-clang clang
          echo "âœ… Proton Clang ready!"
          ls -la clang/bin/ | head -5
      
      - name: âš™ï¸ Merge kernel configs
        working-directory: kernel
        run: |
          echo "âš™ï¸ Merging kernel configs..."
          
          # Chá»n battery config dá»±a trÃªn profile
          BATTERY_CONFIG="angelbeats_balanced.config"
          
          case "${{ inputs.profile }}" in
            extreme_battery)
              BATTERY_CONFIG="angelbeats_extreme_battery.config"
              echo "Using: EXTREME BATTERY mode"
              ;;
            balanced)
              BATTERY_CONFIG="angelbeats_balanced.config"
              echo "Using: BALANCED mode (recommended)"
              ;;
            performance)
              BATTERY_CONFIG="angelbeats_performance.config"
              echo "Using: PERFORMANCE mode"
              ;;
          esac
          
          # Merge: GKI base + Xiaomi 14 Pro + Battery profile
          echo "Merging configs..."
          cat arch/arm64/configs/gki_defconfig \
              arch/arm64/configs/vendor/shennong_GKI.config \
              arch/arm64/configs/vendor/$BATTERY_CONFIG \
              > .config
          
          echo "âœ… Configs merged successfully!"
          echo "Total config lines: $(wc -l < .config)"
      
      - name: ğŸ—ï¸ Build kernel
        working-directory: kernel
        run: |
          echo "ğŸ—ï¸ Starting kernel build..."
          echo "Profile: ${{ inputs.profile }}"
          echo ""
          
          # Setup build environment
          export PATH="$GITHUB_WORKSPACE/clang/bin:$PATH"
          export ARCH=arm64
          export SUBARCH=arm64
          export CROSS_COMPILE=aarch64-linux-gnu-
          export CROSS_COMPILE_ARM32=arm-linux-gnueabi-
          export CC=clang
          export LLVM=1
          export LLVM_IAS=1
          
          # Show compiler info
          clang --version | head -1
          
          # Resolve config dependencies
          echo "Resolving config dependencies..."
          make olddefconfig
          
          # Show kernel version
          echo "Building kernel version:"
          make kernelversion
          
          echo ""
          echo "ğŸš€ Compiling with $(nproc) CPU cores..."
          echo ""
          
          # Build kernel
          make -j$(nproc) 2>&1 | tee ../build.log
          
          # Check if build succeeded
          if [ -f arch/arm64/boot/Image.gz ]; then
            echo ""
            echo "âœ… ================================"
            echo "âœ… KERNEL BUILD SUCCESSFUL!"
            echo "âœ… ================================"
            ls -lh arch/arm64/boot/Image.gz
          else
            echo ""
            echo "âŒ ================================"
            echo "âŒ BUILD FAILED!"
            echo "âŒ ================================"
            echo "Last 100 lines of build log:"
            tail -100 ../build.log
            exit 1
          fi
      
      - name: ğŸ“¦ Package AnyKernel3
        run: |
          echo "ğŸ“¦ Packaging kernel with AnyKernel3..."
          
          # Clone AnyKernel3
          git clone --depth=1 https://github.com/osm0sis/AnyKernel3
          cd AnyKernel3
          
          # Copy kernel image
          cp ../kernel/arch/arm64/boot/Image.gz ./
          
          # Create anykernel.sh config
          cat > anykernel.sh << 'AKEOF'
# AnyKernel3 Ramdisk Mod Script
# osm0sis @ xda-developers

## AnyKernel setup
properties() { '
kernel.string=AngelBeats-SukiSU-SUSFS-Xiaomi14Pro by YourName
do.devicecheck=1
do.modules=0
do.systemless=1
do.cleanup=1
do.cleanuponabort=0
device.name1=shennong
device.name2=Xiaomi 14 Pro
device.name3=2311DRN47C
device.name4=2311DRN48C
supported.versions=14-15
supported.patchlevels=
'; }

## AnyKernel methods
block=/dev/block/by-name/boot;
is_slot_device=auto;
ramdisk_compression=auto;

. tools/ak3-core.sh;

## AnyKernel boot install
dump_boot;
write_boot;
## end boot install
AKEOF
          
          # Create flashable zip
          PROFILE="${{ inputs.profile }}"
          DATE=$(date +%Y%m%d-%H%M)
          ZIPNAME="AngelBeats-SukiSU-SUSFS-Xiaomi14Pro-${PROFILE}-${DATE}.zip"
          
          zip -r9 "../${ZIPNAME}" * -x .git README.md *placeholder
          
          cd ..
          
          echo "âœ… Kernel packaged successfully!"
          echo "Filename: ${ZIPNAME}"
          ls -lh "${ZIPNAME}"
          
          # Create kernel info file
          cat > KERNEL_INFO.txt << EOF
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ”‹ AngelBeats-Style Kernel for Xiaomi 14 Pro        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… Build Date: $(date '+%Y-%m-%d %H:%M:%S UTC')
âš¡ Battery Profile: ${PROFILE}
ğŸ—ï¸  Built with GitHub Actions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ FEATURES:

âœ… SukiSU Ultra - Advanced root solution
âœ… SUSFS v2.0.0 - Root hiding & bypass SafetyNet
âœ… KPM (Kernel Patch Module) - Full support
âœ… KProbes - Kernel debugging interface
âœ… BBG (Baseband Guard) - Enhanced security
âœ… AngelBeats battery optimization
âœ… BFQ I/O Scheduler - Better I/O performance
âœ… Schedutil CPU Governor - Dynamic frequency scaling

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± DEVICE INFORMATION:

Device: Xiaomi 14 Pro (shennong)
Codename: shennong
Kernel Version: 6.1.118
Android: 14-15
Architecture: ARM64

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¥ INSTALLATION:

Method 1: TWRP Recovery (Recommended)
  1. Reboot to TWRP: adb reboot recovery
  2. Install â†’ Select ZIP file
  3. Swipe to flash
  4. Reboot system

Method 2: Kernel Flasher App
  1. Install Franco Kernel Manager or EX Kernel Manager
  2. Open app â†’ Grant root
  3. Flash kernel from ZIP
  4. Reboot

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  IMPORTANT:

- ALWAYS backup your current boot.img before flashing!
  adb shell su -c "dd if=/dev/block/by-name/boot of=/sdcard/boot_backup.img"
  adb pull /sdcard/boot_backup.img

- If bootloop occurs:
  - Boot to fastboot: adb reboot bootloader
  - Flash backup: fastboot flash boot boot_backup.img
  - Reboot: fastboot reboot

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ POST-FLASH TIPS:

1. Install Scene app or kernel manager:
   - Scene (Coolapk): https://www.coolapk.com/apk/com.omarea.vtools
   - Franco Kernel Manager (Play Store)
   - EX Kernel Manager (Play Store)

2. Recommended settings for battery:
   - CPU Governor: schedutil or powersave
   - I/O Scheduler: bfq
   - Thermal: Balanced or Cool

3. For maximum battery life (extreme_battery profile):
   - Lower max CPU frequency to 2.0 GHz
   - Enable aggressive doze
   - Disable background sync when not needed

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š BATTERY PROFILES:

- extreme_battery: Maximum battery life, reduced performance
  - Best for: Light usage, long battery life priority
  - CPU: Aggressive powersave
  - Wakelock limit: 100

- balanced: Good battery + Good performance (RECOMMENDED)
  - Best for: Daily driver, most users
  - CPU: Dynamic scheduling
  - Wakelock limit: 200

- performance: Maximum performance, reduced battery
  - Best for: Gaming, heavy multitasking
  - CPU: Performance oriented
  - Wakelock limit: 500

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERIFICATION:

After flash, verify installation:

# Check kernel version
adb shell uname -r

# Check KernelSU/SukiSU
adb shell su -c "ksud -V"

# Check SUSFS (if module installed)
adb shell su -c "ksu_susfs -h"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”— LINKS:

- SukiSU: github.com/SukiSU-Ultra/SukiSU-Ultra
- SUSFS: gitlab.com/simonpunk/susfs4ksu
- XDA Thread: [Add your thread link]
- Telegram: [Add your channel]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’– CREDITS:

- Xiaomi - Kernel source
- tiann - KernelSU
- simonpunk - SUSFS
- osm0sis - AnyKernel3
- kdrag0n - Proton Clang
- AngelBeats Kernel - Inspiration

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš¡ Enjoy your optimized kernel! âš¡
EOF
          
          # Save zipname for upload step
          echo "ZIPNAME=${ZIPNAME}" >> $GITHUB_ENV
      
      - name: ğŸ“¤ Upload kernel artifacts
        uses: actions/upload-artifact@v4
        with:
          name: Xiaomi-14-Pro-Kernel-${{ inputs.profile }}
          path: |
            *.zip
            KERNEL_INFO.txt
            build.log
          retention-days: 30
      
      - name: ğŸ‰ Build complete!
        run: |
          echo ""
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘                                        â•‘"
          echo "â•‘    âœ… BUILD SUCCESSFUL! âœ…            â•‘"
          echo "â•‘                                        â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "ğŸ“¦ Kernel: ${{ env.ZIPNAME }}"
          echo "âš¡ Profile: ${{ inputs.profile }}"
          echo ""
          echo "ğŸ“¥ Download from Artifacts section below"
          echo "âš¡ Flash via TWRP or Kernel Flasher app"
          echo "ğŸ”‹ Enjoy better battery life!"
          echo ""
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
